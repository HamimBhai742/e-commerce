
generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}


model User{
  id String  @id @default(uuid())
  name String
  email String      @unique
  password String
  role Role            @default(user)
  isVerified Boolean @default(false)
  isDeleted Boolean @default(false)
  otp       String? 
  otpExpiresAt   DateTime?  
 review  Review[]
 cart Cart[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  @@map("users")
}


model Product {
  id               String   @id @default(uuid())
  name             String
  slug             String   @unique
  description      String
  shortDescription String?
  price            Float
  discountPrice    Float?
  sku              String   @unique
  stock            Int
  isInStock        Boolean  @default(true)
  status           String   @default("active")

  thumbnail        String

  weight           Float?
  material         String?

  rating           Float    @default(0)
  reviewCount      Int      @default(0)

  cart Cart[]

  isFeatured       Boolean  @default(false)
  review            Review[]
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  @@map("products")
}

model Review {
  id String @id @default(uuid())
  review String
  userId String
  productId String
  product Product @relation(fields: [productId],references: [id])
  user User   @relation(fields: [userId],references: [id])

  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  @@unique([productId,userId])
  @@map("reviews")
}


model Cart{
  id String @id @default(uuid())
  productId String
  product Product @relation(fields: [productId],references: [id])
  userId String
  user User @relation(fields: [userId],references: [id])
  quantity Float @default(1)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  @@unique([productId,userId])
  @@map("carts")
}


enum Role{
  user
 admin
}
